Index: back-end/application/src/main/resources/application.yml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#=================================================================================\r\n#==========================   spring设置  =========================================\r\n#=================================================================================\r\n\r\nspring:\r\n  profiles:\r\n    active:\r\n      - @spring.active@\r\n  task:\r\n    scheduling:\r\n      pool:\r\n        #定时任务线程池大小设置默认1设置为5\r\n        size: 10\r\n  jackson:\r\n    time-zone: GMT+8\r\n    #jackson时间格式化格式\r\n    date-format: yyyy-MM-dd HH:mm:ss\r\n  mvc:\r\n    format:\r\n      #日期格式化\r\n      date-time: yyyy-MM-dd HH:mm:ss\r\n  servlet:\r\n    multipart:\r\n      max-request-size: 30MB\r\n      #文件写入磁盘的阈值,设置为0，即上传就存储在服务器,如果是100则表示小于100会存储在内存\r\n      file-size-threshold: 0\r\n      #单个文件上传的最大值\r\n      max-file-size: 30MB\r\nserver:\r\n  port: 8080\r\n\r\n#===========================================================================\r\n#==========================mybatis配置=======================================\r\n#============================================================================\r\n\r\nmybatis-plus:\r\n  global-config:\r\n    db-config:\r\n      #全局主键使用雪花算法生成id\r\n      id-type: assign_id\r\n  configuration:\r\n    #打印sql\r\n    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl\r\n  mapper-locations: \"classpath:**/mapping/*.xml\"\r\n\r\n#=============================================================================\r\n#======================== 自定义配置  =========================================\r\n#=============================================================================\r\nauthorization:\r\n  exclude:\r\n    - /**/doc.html\r\n    - /**/*.css\r\n    - /**/*.js\r\n    - /**/*.png\r\n    - /**/*.jpg\r\n    - /**/*.ico\r\n    - /**/v3/**\r\n    - /**/doLogin\r\n    - /**/doRegister\r\n    - /**/file/doDownload/**\r\n    - /chat/**\r\n  token-name: auth\r\n\r\n# 图床服务\r\n\r\n\r\n#日志文件存储位置\r\nlog:\r\n  path: @log.path@
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/back-end/application/src/main/resources/application.yml b/back-end/application/src/main/resources/application.yml
--- a/back-end/application/src/main/resources/application.yml	(revision 46323740c00bea8bfcff79024af11021c2f3b8fb)
+++ b/back-end/application/src/main/resources/application.yml	(date 1718864328979)
@@ -62,7 +62,13 @@
   token-name: auth
 
 # 图床服务
-
+file:
+  upload:
+    url: mpw:39HFZ7JpJyERXyN3IdfvI2f8UQblX/Nj7JXchkxr5HvDKaXbZAEUsa6e/W4V3AaG
+  download:
+    url: mpw:39HFZ7JpJyERXyN3IdfvI2f8UQblX/Nj7JXchkxr5Hum07kGTKU0vNp0APxclKTr
+  signature: ChatHub
+  cipher-text: mpw:keYAqHvkflCYPqEjIvMD+6wY+/wdjMIkVtB3F7A7+Nw1joOZ4AwkWujJKio2plzr
 
 #日志文件存储位置
 log:
Index: back-end/pom.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n\r\n    <groupId>com.james.aks</groupId>\r\n    <artifactId>chat-hub</artifactId>\r\n    <version>${revision}</version>\r\n    <packaging>pom</packaging>\r\n\r\n    <modules>\r\n        <module>application</module>\r\n        <module>common</module>\r\n    </modules>\r\n\r\n    <properties>\r\n        <!--  统一版本管理      -->\r\n        <revision>1.0.0</revision>\r\n        <!--   通用设置     -->\r\n        <java.version>17</java.version>\r\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\r\n        <maven.compiler.source>17</maven.compiler.source>\r\n        <maven.compiler.target>17</maven.compiler.target>\r\n        <!--  依赖版本      -->\r\n        <spring.boot.version>3.0.2</spring.boot.version>\r\n        <com.github.xiaoymin.version>4.2.0</com.github.xiaoymin.version>\r\n        <com.baomidou.version>3.5.3.1</com.baomidou.version>\r\n        <cn.hutool.version>5.8.25</cn.hutool.version>\r\n        <ip2region.version>2.7.0</ip2region.version>\r\n        <!-- 插件版本   -->\r\n        <flatten-maven-plugin.version>1.5.0</flatten-maven-plugin.version>\r\n    </properties>\r\n\r\n    <dependencyManagement>\r\n        <dependencies>\r\n            <dependency>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-starter-websocket</artifactId>\r\n                <version>${spring.boot.version}</version>\r\n            </dependency>\r\n            <!--   spring boot 依赖  spring boot管理    -->\r\n            <dependency>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-dependencies</artifactId>\r\n                <version>${spring.boot.version}</version>\r\n                <type>pom</type>\r\n                <scope>import</scope>\r\n            </dependency>\r\n            <!--   mybatis-plus     -->\r\n            <dependency>\r\n                <groupId>com.baomidou</groupId>\r\n                <artifactId>mybatis-plus-boot-starter</artifactId>\r\n                <version>${com.baomidou.version}</version>\r\n            </dependency>\r\n            <!--   hutool     -->\r\n            <dependency>\r\n                <groupId>cn.hutool</groupId>\r\n                <artifactId>hutool-all</artifactId>\r\n                <version>${cn.hutool.version}</version>\r\n            </dependency>\r\n            <!--\tknife4j文档\t-->\r\n            <dependency>\r\n                <groupId>com.github.xiaoymin</groupId>\r\n                <artifactId>knife4j-openapi3-jakarta-spring-boot-starter</artifactId>\r\n                <version>${com.github.xiaoymin.version}</version>\r\n            </dependency>\r\n            <!--    自定义        -->\r\n            <dependency>\r\n                <groupId>com.james.aks</groupId>\r\n                <artifactId>common</artifactId>\r\n                <version>${revision}</version>\r\n            </dependency>\r\n            <!--    解析IP    -->\r\n            <dependency>\r\n                <groupId>org.lionsoul</groupId>\r\n                <artifactId>ip2region</artifactId>\r\n                <version>${ip2region.version}</version>\r\n            </dependency>\r\n        </dependencies>\r\n    </dependencyManagement>\r\n\r\n    <dependencies>\r\n        <!--   hutool     -->\r\n        <dependency>\r\n            <groupId>cn.hutool</groupId>\r\n            <artifactId>hutool-all</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.projectlombok</groupId>\r\n            <artifactId>lombok</artifactId>\r\n            <optional>true</optional>\r\n        </dependency>\r\n    </dependencies>\r\n\r\n    <build>\r\n        <plugins>\r\n            <!--   maven工程版本依赖管理 用于替换占位符   -->\r\n            <plugin>\r\n                <groupId>org.codehaus.mojo</groupId>\r\n                <artifactId>flatten-maven-plugin</artifactId>\r\n                <version>${flatten-maven-plugin.version}</version>\r\n                <configuration>\r\n                    <!--true：更新pom文件，不然无法更新module里的pom版本号，此处还有更高级的用法，具体参靠官方文档-->\r\n                    <updatePomFile>true</updatePomFile>\r\n                    <flattenMode>resolveCiFriendliesOnly</flattenMode>\r\n                </configuration>\r\n                <executions>\r\n                    <execution>\r\n                        <id>flatten</id>\r\n                        <phase>process-resources</phase>\r\n                        <goals>\r\n                            <goal>flatten</goal>\r\n                        </goals>\r\n                    </execution>\r\n                    <execution>\r\n                        <id>flatten.clean</id>\r\n                        <phase>clean</phase>\r\n                        <goals>\r\n                            <goal>clean</goal>\r\n                        </goals>\r\n                    </execution>\r\n                </executions>\r\n            </plugin>\r\n        </plugins>\r\n        <pluginManagement>\r\n            <plugins>\r\n                <plugin>\r\n                    <groupId>org.springframework.boot</groupId>\r\n                    <artifactId>spring-boot-maven-plugin</artifactId>\r\n                    <version>${spring.boot.version}</version>\r\n                    <configuration>\r\n                        <excludes>\r\n                            <exclude>\r\n                                <groupId>org.projectlombok</groupId>\r\n                                <artifactId>lombok</artifactId>\r\n                            </exclude>\r\n                        </excludes>\r\n                    </configuration>\r\n                    <executions>\r\n                        <execution>\r\n                            <goals>\r\n                                <!--    打包为可执行的jar包-->\r\n                                <goal>repackage</goal>\r\n                            </goals>\r\n                        </execution>\r\n                    </executions>\r\n                </plugin>\r\n            </plugins>\r\n        </pluginManagement>\r\n        <resources>\r\n            <resource>\r\n                <!--   解决配置文件使用@关键字             -->\r\n                <directory>src/main/resources</directory>\r\n                <filtering>true</filtering>\r\n            </resource>\r\n        </resources>\r\n    </build>\r\n\r\n    <profiles>\r\n        <profile>\r\n            <id>dev</id>\r\n            <properties>\r\n                <spring.active>dev</spring.active>\r\n                <!--    随环境参数在此填写，自定义标签，使用@标签名@       -->\r\n                <save.path>D:\\secure\\chat\\temp\\</save.path>\r\n                <log.path>D:\\Temp\\2024\\logs</log.path>\r\n                <knife4j.enable>false</knife4j.enable>\r\n            </properties>\r\n            <activation>\r\n                <activeByDefault>true</activeByDefault>\r\n            </activation>\r\n        </profile>\r\n        <profile>\r\n            <id>prod</id>\r\n            <properties>\r\n                <spring.active>prod</spring.active>\r\n                <save.path>/home/server/secure-chat-hub/</save.path>\r\n                <log.path>/home/server/secure-chat-hub/logs</log.path>\r\n                <knife4j.enable>true</knife4j.enable>\r\n            </properties>\r\n        </profile>\r\n    </profiles>\r\n</project>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/back-end/pom.xml b/back-end/pom.xml
--- a/back-end/pom.xml	(revision 46323740c00bea8bfcff79024af11021c2f3b8fb)
+++ b/back-end/pom.xml	(date 1718864139375)
@@ -167,9 +167,6 @@
                 <log.path>D:\Temp\2024\logs</log.path>
                 <knife4j.enable>false</knife4j.enable>
             </properties>
-            <activation>
-                <activeByDefault>true</activeByDefault>
-            </activation>
         </profile>
         <profile>
             <id>prod</id>
@@ -179,6 +176,9 @@
                 <log.path>/home/server/secure-chat-hub/logs</log.path>
                 <knife4j.enable>true</knife4j.enable>
             </properties>
+            <activation>
+                <activeByDefault>true</activeByDefault>
+            </activation>
         </profile>
     </profiles>
 </project>
Index: back-end/application/src/main/resources/application-dev.yml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#测试环境\r\nspring:\r\n  datasource:\r\n    driver-class-name: com.mysql.cj.jdbc.Driver\r\n    hikari:\r\n      # 连接池最大连接数，默认是 10\r\n      maximum-pool-size: 60\r\n      # 链接超时时间，默认 30000(30 秒)\r\n      connection-timeout: 60000\r\n      # 空闲连接存活最大时间，默认 600000(10 分钟)\r\n      idle-timeout: 60000\r\n      # 连接将被测试活动的最大时间量\r\n      validation-timeout: 3000\r\n      # 此属性控制池中连接的最长生命周期，值 0 表示无限生命周期，默认 1800000(30 分钟)\r\n      max-lifetime: 60000\r\n      # 连接到数据库时等待的最长时间(秒)\r\n      login-timeout: 5\r\n      # 池中维护的最小空闲连接数\r\n      minimum-idle: 10\r\n      #连接测试SQL\r\n      connection-test-query: \"SELECT 1\"\r\n    # 以下为解决 No operations allowed after connection closed 的主要配置\r\n    dbcp2:\r\n      # 验证连接是否有效\r\n      validation-query: SELECT 1\r\n      # 指明是否在从池中取出连接前进行检验,如果检验失败,则从池中去除连接并尝试取出另一个\r\n      test-on-borrow: false\r\n      # 指明连接是否被空闲连接回收器(如果有)进行检验；如果检测失败,则连接将被从池中去除。\r\n      test-while-idle: true\r\n      # 指定空闲连接检查、废弃连接清理、空闲连接池大小调整之间的操作时间间隔\r\n      time-between-eviction-runs-millis: 18800\r\n#=============================================================================\r\n#======================== swagger 配置  =======================================\r\n#=============================================================================\r\n\r\nspringdoc:\r\n  api-docs:\r\n    #是否开启文档功能关系到swagger-ui能否开启\r\n    enabled: true\r\n    #swagger后端请求地址，查看swagger所有配置，同时也是配置web端的接口配置,必须写\r\n    path: /v3/api-docs\r\n  swagger-ui:\r\n    #标签排序\r\n    tags-sorter: alpha\r\n    #操作排序\r\n    operations-sorter: alpha\r\n    #自定义swagger前端请求路径，输入http：127.0.0.1:8080/swagger会自动重定向到swagger页面注意是path不是url\r\n    path: /swagger\r\n  group-configs:\r\n    - group: 测试API\r\n      packages-to-scan:\r\n        - com.chat.controller\r\n        - com.chat.domain\r\n\r\n# knife4j的增强配置，不需要增强可以不配\r\nknife4j:\r\n  #开启访问默认路径doc.html\r\n  enable: true\r\n  setting:\r\n    language: zh_cn\r\n    #不开启缓存请求\r\n    enable-request-cache: false\r\n  #跨域请求\r\n  cors: true\r\n  #是否是生产环境，如果设置true,doc.html就不能访问\r\n  production: @knife4j.enable@
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/back-end/application/src/main/resources/application-dev.yml b/back-end/application/src/main/resources/application-dev.yml
--- a/back-end/application/src/main/resources/application-dev.yml	(revision 46323740c00bea8bfcff79024af11021c2f3b8fb)
+++ b/back-end/application/src/main/resources/application-dev.yml	(date 1718863748807)
@@ -2,6 +2,10 @@
 spring:
   datasource:
     driver-class-name: com.mysql.cj.jdbc.Driver
+    #用于连接本地数据库测试是否能正确运行
+    url: mpw:p4fArsWMpc2SnWO2PM4QE2rw8Ti61v8srF9T6H0eY/LEpbymeGDDjTdXw89mUq3ZPT11V+uvy0jef+9Dls+h/s5DNiKvd98HON11SiqdMMndgHKsBrMQkLHo48TN1wh3LMJ6k67xatT7wmIQUQcwBmETerG/QYLxAutCYiicwXU=
+    username: mpw:oN2F9CZuEk9EA2XZ3kDXVg==
+    password: mpw:qZ7IjFvZbsLOrDpZnUE0PQ==
     hikari:
       # 连接池最大连接数，默认是 10
       maximum-pool-size: 60
